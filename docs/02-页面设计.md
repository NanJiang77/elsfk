# 俄罗斯方块游戏 - 页面设计文档

## 📌 设计概述

本文档描述俄罗斯方块游戏的页面布局、组件结构和视觉设计方案。

**平台范围**: 仅支持桌面端（PC），不考虑移动端适配

---

## 🎨 整体布局设计

### 布局结构

游戏采用**居中三栏布局**，游戏区域位于中心并占据主要位置，针对桌面端优化。

```
┌─────────────────────────────────────────────────────────────┐
│                        顶部导航栏                            │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ┌──────────────┐  ┌──────────────────┐  ┌──────────────┐  │
│  │   操作说明   │  │     游戏区域      │  │   游戏信息   │  │
│  │              │  │                  │  │              │  │
│  │   键盘按键   │  │                  │  │  下一方块    │  │
│  │   功能说明   │  │                  │  │              │  │
│  │              │  │                  │  ├──────────────┤  │
│  │   ← →       │  │                  │  │  当前分数    │  │
│  │   ↑ ↓       │  │   10×20 网格     │  │  最高分数    │  │
│  │   空格 P     │  │                  │  │  当前等级    │  │
│  │              │  │                  │  │  消除行数    │  │
│  │              │  │                  │  │              │  │
│  └──────────────┘  └──────────────────┘  └──────────────┘  │
│                                                             │
├─────────────────────────────────────────────────────────────┤
│                        底部页脚                             │
└─────────────────────────────────────────────────────────────┘
```

**布局说明**:
- **左侧面板**: 键盘操作说明（固定宽度 200px）
- **中间区域**: 游戏主画面（核心区域，占据最大空间）
- **右侧面板**: 游戏状态信息（固定宽度 220px）

---

## 📐 详细页面设计

### 1. 顶部导航栏 (Header)

**功能**: 显示游戏标题和主要导航

**组件结构**:
```vue
<Header>
  <Logo>俄罗斯方块</Logo>
  <NavMenu>
    <NavLink>游戏</NavLink>
    <NavLink>排行榜</NavLink>
    <NavLink>设置</NavLink>
  </NavMenu>
</Header>
```

**样式设计**:
- 高度: 60px
- 背景色: 渐变色 `linear-gradient(135deg, #667eea 0%, #764ba2 100%)`
- 文字颜色: 白色
- Logo字体: 粗体, 24px

---

### 2. 左侧操作说明面板 (ControlsPanel)

**功能**: 显示键盘按键说明，无需鼠标点击按钮

**布局**:
```
┌──────────────────┐
│   操作说明        │
├──────────────────┤
│                  │
│  ┌─────────┐     │
│  │    ←    │     │
│  │  左移   │     │
│  └─────────┘     │
│                  │
│  ┌─────────┐     │
│  │    →    │     │
│  │  右移   │     │
│  └─────────┘     │
│                  │
│  ┌─────────┐     │
│  │    ↑    │     │
│  │  旋转   │     │
│  └─────────┘     │
│                  │
│  ┌─────────┐     │
│  │    ↓    │     │
│  │  加速   │     │
│  └─────────┘     │
│                  │
│  ┌─────────┐     │
│  │  Space  │     │
│  │  硬降   │     │
│  └─────────┘     │
│                  │
│  ┌─────────┐     │
│  │    P    │     │
│  │  暂停   │     │
│  └─────────┘     │
│                  │
│  ┌─────────┐     │
│  │    R    │     │
│  │  重新   │     │
│  └─────────┘     │
│                  │
└──────────────────┘
```

**样式设计**:
- 宽度: 200px
- 背景: 半透明卡片 `rgba(255,255,255,0.08)`
- 圆角: 12px
- 内边距: 16px
- 边框: 1px solid `rgba(255,255,255,0.1)`

**按键卡片样式**:
```css
.key-card {
  background: rgba(255,255,255,0.1);
  border-radius: 8px;
  padding: 10px;
  margin-bottom: 10px;
  text-align: center;
}

.key-icon {
  display: inline-block;
  background: rgba(255,255,255,0.2);
  border: 2px solid rgba(255,255,255,0.3);
  border-radius: 6px;
  padding: 8px 16px;
  font-size: 18px;
  font-weight: bold;
  margin-bottom: 6px;
}
```

---

### 3. 游戏主区域

#### 3.1 游戏画布 (GameCanvas)

**尺寸**:
- 宽度: 400px
- 高度: 800px
- 网格: 10列 × 20行
- 每个方块: 40px × 40px

**样式设计**:
- 边框: 3px solid #333
- 背景: 深色背景 `#1a1a2e`
- 网格线: 半透明辅助线 `rgba(255,255,255,0.05)`

**Canvas 渲染**:
```javascript
// 方块颜色配置
const COLORS = {
  I: '#00f0f0',  // 青色
  O: '#f0f000',  // 黄色
  T: '#a000f0',  // 紫色
  S: '#00f000',  // 绿色
  Z: '#f00000',  // 红色
  J: '#0000f0',  // 蓝色
  L: '#f0a000'   // 橙色
}
```

#### 3.2 游戏覆盖层 (Overlay)

**场景1: 未开始/游戏结束**
```
┌──────────────────┐
│                  │
│   [游戏标题]      │
│                  │
│   [开始游戏]     │
│                  │
└──────────────────┘
```

**场景2: 暂停**
```
┌──────────────────┐
│                  │
│     已暂停       │
│                  │
│   [继续游戏]     │
│   [重新开始]     │
│                  │
└──────────────────┘
```

---

### 4. 右侧游戏信息面板 (InfoPanel)

**布局**:
```
┌──────────────────┐
│   下一方块       │
│  ┌──┐           │
│  │  │ 4x4格子   │
│  └──┘           │
├──────────────────┤
│  当前分数: 0     │
│  最高分数: 0     │
├──────────────────┤
│  当前等级: 1     │
│  消除行数: 0     │
└──────────────────┘
```

**样式设计**:
- 宽度: 220px
- 背景: 半透明卡片 `rgba(255,255,255,0.08)`
- 圆角: 12px
- 内边距: 16px
- 文字颜色: 白色
- 数字显示: 32px 粗体
- 标签字体: 14px
- 边框: 1px solid `rgba(255,255,255,0.1)`

**下一方块预览**:
- Canvas: 140px × 140px
- 方块大小: 30px × 30px

---

### 5. 底部页脚 (Footer)

**内容**:
```
© 2026 俄罗斯方块 | 使用 Vue 3 + Canvas 构建
```

**样式**:
- 高度: 50px
- 背景色: `#1a1a2e`
- 文字颜色: `#888`
- 文字居中

---

## 🎨 视觉设计规范

### 配色方案

**主色调**:
```css
--primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
--primary-color: #667eea;
--secondary-color: #764ba2;
```

**背景色**:
```css
--bg-dark: #0f0f1e;
--bg-card: rgba(255, 255, 255, 0.1);
--bg-overlay: rgba(0, 0, 0, 0.8);
```

**文字色**:
```css
--text-primary: #ffffff;
--text-secondary: #cccccc;
--text-muted: #888888;
```

**方块色**:
```css
--color-I: #00f0f0;
--color-O: #f0f000;
--color-T: #a000f0;
--color-S: #00f000;
--color-Z: #f00000;
--color-J: #0000f0;
--color-L: #f0a000;
```

### 字体规范

```css
--font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
--font-size-title: 32px;
--font-size-heading: 24px;
--font-size-body: 16px;
--font-size-small: 14px;
```

### 间距规范

```css
--spacing-xs: 4px;
--spacing-sm: 8px;
--spacing-md: 16px;
--spacing-lg: 24px;
--spacing-xl: 32px;
```

---

## 🖥️ 桌面端布局

### 屏幕适配

**最佳屏幕分辨率**: 1920×1080 或更高
**最小支持分辨率**: 1280×720

```css
/* 主容器固定宽度 */
.game-container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
}

/* 确保在小屏幕上也能正常显示 */
@media (max-width: 1280px) {
  .game-container {
    padding: 10px;
  }
}
```

---

## 🎬 动画效果

### 1. 方块落地动画
```css
@keyframes dropFlash {
  0% { opacity: 1; }
  50% { opacity: 0.5; }
  100% { opacity: 1; }
}

.block-land {
  animation: dropFlash 0.2s ease-in-out;
}
```

### 2. 行消除动画
```css
@keyframes lineClear {
  0% { opacity: 1; transform: scale(1); }
  50% { opacity: 0.5; transform: scale(1.05); background: #fff; }
  100% { opacity: 0; transform: scale(0); }
}

.line-clear {
  animation: lineClear 0.3s ease-out;
}
```

### 3. 等级升级动画
```css
@keyframes levelUp {
  0% { transform: scale(1); }
  50% { transform: scale(1.3); color: #ffd700; }
  100% { transform: scale(1); }
}

.level-up {
  animation: levelUp 0.5s ease-in-out;
}
```

---

## 🧩 组件树结构

```
App
├── Header
│   ├── Logo
│   └── NavMenu
│       └── NavLink × 3
├── Main
│   ├── GamePage
│   │   ├── GameContainer
│   │   │   ├── ControlsPanel (左侧操作说明)
│   │   │   │   └── KeyCard × 6
│   │   │   ├── GameCanvas (中间游戏区域)
│   │   │   │   ├── Canvas (游戏画面)
│   │   │   │   └── Overlay (覆盖层)
│   │   │   └── InfoPanel (右侧游戏信息)
│   │   │       ├── NextPiecePreview
│   │   │       ├── ScoreDisplay
│   │   │       ├── LevelDisplay
│   │   │       └── LinesDisplay
│   │   └── LeaderBoard (排行榜)
│   └── SettingsPage (设置)
└── Footer
```

---

## 📄 页面路由设计

```javascript
const routes = [
  {
    path: '/',
    name: 'Game',
    component: GamePage
  },
  {
    path: '/leaderboard',
    name: 'LeaderBoard',
    component: LeaderBoardPage
  },
  {
    path: '/settings',
    name: 'Settings',
    component: SettingsPage
  }
]
```

---

## ✅ 用户体验优化

### 1. 加载状态
- 首次进入显示加载动画
- 资源加载完成后自动进入游戏

### 2. 操作反馈
- 按钮点击有视觉反馈
- 消除行时有闪烁效果
- 升级时有特殊动画
- 键盘操作即时响应

### 3. 键盘操作
- 所有游戏控制均通过键盘完成
- 左侧面板始终显示按键说明
- 按键即时响应，无延迟
- 支持按键组合（如按住加速键连续下落）

### 4. 游戏状态反馈
- 消除行时有闪烁效果
- 升级时有特殊动画
- 暂停时显示半透明遮罩
- 游戏结束时显示最终分数

### 5. 桌面端优化
- 纯键盘操作，无需鼠标
- 清晰的视觉反馈
- 合理的信息层级

---

---

## 🎯 新增组件（v2.0）

### 用户名输入对话框 (PlayerNameDialog)

**功能**: 首次访问时要求用户输入名字

**触发条件**:
- 用户首次访问游戏
- localStorage中没有保存的用户名

**布局**:
```
┌─────────────────────────────┐
│      欢迎来到俄罗斯方块       │
├─────────────────────────────┤
│                             │
│   请输入您的名字开始游戏      │
│                             │
│   ┌─────────────────────┐   │
│   │  输入框（2-20字符）  │   │
│   └─────────────────────┘   │
│                             │
│   ℹ️ 您的名字将用于保存      │
│      游戏记录和排行榜展示    │
│                             │
├─────────────────────────────┤
│      [开始游戏]             │
└─────────────────────────────┘
```

**样式设计**:
- 使用Element Plus Dialog组件
- 宽度: 400px
- 不可通过点击遮罩关闭
- 不可通过ESC键关闭
- 自动聚焦输入框
- 支持Enter键提交

---

### 游戏板组件 (GameBoard)

**功能**: 负责渲染已固定的方块网格

**技术实现**: Canvas渲染

**尺寸**: 400px × 800px

---

### 方块渲染组件 (PieceRenderer)

**功能**: 负责渲染当前下落方块和幽灵方块

**技术实现**: Canvas渲染

**特性**:
- 幽灵方块（预览落地位置）
- 半透明显示
- 层叠在GameBoard之上

---

**文档版本**: v2.0
**创建日期**: 2026-01-20
**最后更新**: 2026-01-22
**更新内容**:
- 新增用户名输入对话框设计
- 新增组件化架构说明（GameBoard、PieceRenderer）
- 更新快捷键说明（不区分大小写）
